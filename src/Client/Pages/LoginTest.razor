@page "/login-test/aftermatch"
@inject IAuthService AuthService
@inject NavigationManager NavigationManager
@inject HttpClient Http;
@using GasWeb.Shared.Authentication;

<h1>Login</h1>

@code {

    private LoginModel loginModel = new LoginModel();
    private bool ShowErrors;
    private string Error = "";

    protected override void OnInitialized()
    {
        NavigationManager.NavigateTo("api/auth/login-facebook?callback=register-test");
    }

    private async Task HandleLogin()
    {
        ShowErrors = false;

        var result = await AuthService.Login(loginModel);

        if (result.Successful)
        {
            NavigationManager.NavigateTo("/");
        }
        else
        {
            Error = result.Error;
            ShowErrors = true;
        }
    }

}
